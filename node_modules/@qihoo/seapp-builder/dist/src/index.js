"use strict";
var webpack = require('webpack');
var start = function (config) {
    if (config === void 0) { config = {}; }
    var compiler = webpack(config);
    var dealError = function (err, stats) {
        if (isDemo() && (err || stats.hasErrors() || stats.hasWarnings())) {
            var info = stats.toJson();
            console.error(err || info.errors[0] || info.warnings[0]);
        }
    };
    if (config.watch) {
        compiler.watch(config.watchOptions || {}, dealError);
    }
    else {
        compiler.run(dealError);
    }
};
var watch = function () {
    start(require("./config/" + process.env.BUILDER_MODE + "dev"));
};
var build = function () {
    start(require("./config/" + process.env.BUILDER_MODE + "pro"));
};
function isDemo() {
    return process.env.NODE_MODE === 'demo';
}
module.exports = {
    watch: watch,
    build: build
};
//# sourceMappingURL=index.js.map